<template>
    <!-- Title Block -->
 
    <div class="title-block slds-page-header__name-title slds-m-vertical_large " style="margin: 20px 0px 25px 0px;">CHANGE PASSWORD</div>

    <div class="password-wrapper">
        <!-- Old Password Input -->
        <div class="input-box">
            <div class="input-field password-container">
                <div class="slds-is-relative passwordClass">
                    <!-- Toggle Icon for Password Visibility -->
                    <lightning-button-icon icon-name={oldiconName} alternative-text="Show password" class="toggle-icon"
                        onclick={togglePasswordVisibility} slot="after">
                    </lightning-button-icon>

                    <!-- Old Password Label -->
                    <label class="labelsContainer">
                        Old Password
                        <abbr title="required" class="slds-required">*</abbr>
                    </label>

                    <!-- Old Password Input Field -->
                    <div>
                        <lightning-input class="selector-dropdown" type={oldinputType} label="Old Password"
                            name="password" max-length="20" value={currentPassword}
                            onchange={handleCurrentPasswordChange} onbeforeinput={handlepasswordinput}
                            placeholder="Enter Your Old Password"  variant="label-hidden"
                            onpaste={preventPaste}>
                        </lightning-input>
                    </div>
                </div>

                <!-- Error Message for Empty Old Password -->
                <template if:true={isoldpasswordempty}>
                    <div class="error-message slds-text-color_error">
                        Complete this field.
                    </div>
                </template>

                <!-- Error Message for Incorrect Old Password -->
                <template if:true={checkOldPassword}>
                    <div class="error-message slds-text-color_error">
                        Your old password is incorrect.
                    </div>
                </template>
            </div>

            <!-- New Password Input -->
            <div class="input-field password-container">
                <div class="slds-is-relative passwordClass">
                    <!-- Toggle Icon for Password Visibility -->
                    <lightning-button-icon icon-name={newiconName} alternative-text="Show password" class="toggle-icon"
                        onclick={togglenewPasswordVisibility} slot="after">
                    </lightning-button-icon>

                    <!-- New Password Label -->
                    <label class="labelsContainer">
                        New Password
                        <abbr title="required" class="slds-required">*</abbr>
                    </label>

                    <!-- New Password Input Field -->
                    <div>
                        <lightning-input data-id="passwordField" class="selector-dropdown" type={newinputType}
                            label="New Password" name="password" max-length="20" value={newPassword}
                            onchange={handleNewPasswordChange} onbeforeinput={handlepasswordinput} onfocus={handleFocus}
                            onblur={handleBlur} placeholder="Enter Your New Password" 
                            variant="label-hidden" onpaste={preventPaste}>
                        </lightning-input>
                    </div>
                </div>

                <!-- Error Message for Reusing Old Password as New Password -->
                <template if:true={checknewPassworderror}>
                    <div class="error-message slds-text-color_error">
                        You cannot reuse this password as new password.
                    </div>
                </template>

                <!-- Error Message for Using Old Password as New Password -->
                <template if:true={isOldPasswordSame}>
                    <div class="error-message slds-text-color_error">
                        Cannot use old password as new password.
                    </div>
                </template>

                <!-- Error Message for New Password Criteria Mismatch -->
                <template if:true={isOldPasswordcriteria}>
                    <div class="error-message slds-text-color_error">
                        New password does not meet the required criteria.
                    </div>
                </template>

                <!-- Error Message for Empty New Password Field -->
                <template if:true={checknewPassword}>
                    <div class="error-message slds-text-color_error">
                        Complete this field.
                    </div>
                </template>

                <!-- Password Validation Criteria -->
                <template if:true={showValidation}>
                    <div class="slds-box slds-theme_shade slds-theme_alert-texture showValidation">
                        <h3>Password must contain the following:</h3>
                        <p data-id="letter" class="invalid">A lowercase letter</p>
                        <p data-id="capital" class="invalid">An uppercase letter</p>
                        <p data-id="number" class="invalid">A number character</p>
                        <p data-id="length" class="invalid">Minimum 8 characters</p>
                    </div>
                </template>
            </div>

            <!-- Confirm New Password Input -->
            <div class="input-field password-container">
                <div class="slds-is-relative passwordClass">
                    <!-- Toggle Icon for Password Visibility -->
                    <lightning-button-icon icon-name={confirmiconName} alternative-text="Show password"
                        class="toggle-icon" onclick={toggleconfirmPasswordVisibility} slot="after">
                    </lightning-button-icon>

                    <!-- Confirm New Password Label -->
                    <label class="labelsContainer">
                        Confirm New Password
                        <abbr title="required" class="slds-required">*</abbr>
                    </label>

                    <!-- Confirm New Password Input Field -->
                    <div>
                        <lightning-input class="selector-dropdown" type={confirminputType} label="Confirm New Password"
                            name="password" max-length="20" value={confirmPassword}
                            onchange={handleConfirmPasswordChange} onbeforeinput={handlepasswordinput}
                            placeholder="Confirm Your New Password" 
                            variant="label-hidden" onpaste={preventPaste}>
                        </lightning-input>
                    </div>
                </div>

                <!-- Success Message for Password Match -->
                <template if:true={isPasswordMatch}>
                    <div class="success-message slds-text-color_success">
                        Password match.
                    </div>
                </template>

                <!-- Error Message for Password Mismatch -->
                <template if:true={isPasswordMismatch}>
                    <div class="error-message slds-text-color_error">
                        Passwords do not match.
                    </div>
                </template>

                <!-- Error Message for Empty Confirm Password Field -->
                <template if:true={checkconfirmPassword}>
                    <div class="error-message slds-text-color_error">
                        Complete this field.
                    </div>
                </template>
            </div>
              <!-- Change Password Button -->
        <div class="button-container slds-align_absolute-center">
            <lightning-button label="Change Password" onclick={handleChangePassword} disabled={isButtonDisabled} variant="brand">
            </lightning-button>
        </div>
        </div>

      
    </div>



</template>